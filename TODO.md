# 待辦事項清單

本文檔記錄 vite-plugin-html-kit 的待辦事項、修改建議和已知限制。

**最後更新：** 2026-01-23

---

## 📋 待辦事項

### 高優先級

| 項目 | 說明 | 狀態 |
|------|------|------|
| 文檔整理 | README.md、docs 及 playground 中資訊已整合更新 | ✅ 已完成 |
| `@@` 轉義功能 | 用於輸出字面 `@` 符號，例如 `@@if` → `@if` | ✅ 已完成 |
| 遞迴深度檢查 | 添加 `maxIncludeDepth` 選項限制巢狀深度（預設 50） | ✅ 已完成 |

### 低優先級

| 項目 | 說明 | 狀態 |
|------|------|------|
| Blade 功能補完 | 還有一些 Blade 上的功能未完全實現（詳見下方） | ⏳ 待處理 |
| Hash 演算法優化 | 已使用輕量 32-bit FNV-1a 變體 hash（非 MD5） | ✅ 已完成 |

---

## ❌ 未實現的 Blade 功能

> 詳細說明請參考 [BLADE_FEATURES_TODO.md](./BLADE_FEATURES_TODO.md)

| 功能 | 難度 | 預期工作量 | 備註 |
|------|------|-----------|------|
| `@for` / `@while` | ⭐⭐ 中等 | 2-3 小時 | 大部分情況可用 `@foreach` 替代 |
| `@continue` / `@break` | ⭐⭐ 中等 | 2 小時 | 可用條件判斷替代 |
| ~~`@class()` 條件類名~~ | - | - | ✅ 已完成 (2026-01-23) |

---

## ⚠️ 已知限制

| 問題 | 說明 | 參考位置 |
|------|------|---------|
| `@include` 不支援 slot | 只有 `<include>` 標籤支援 slot，`@include` 會轉換成自閉合標籤 | BLADE_FEATURES_TODO.md:31 |
| 迴圈中 slot 作用域問題 | 在迴圈中使用 slot 可能有作用域問題，建議使用屬性傳遞 | README.md:267-274 |
| Vite 資源處理警告 | 暫時性警告，不影響實際功能 | AGENTS.md:320 |

---

## 💡 優化建議

### 程式碼優化 (`src/index.js`)

| 行號 | 建議內容 | 狀態 |
|------|---------|--------|
| 144 | 已使用輕量 32-bit FNV-1a 變體 hash | ✅ 已完成 |
| 1970 | 已添加 `maxIncludeDepth` 深度檢查（預設 50 層） | ✅ 已完成 |

### 效能優化建議

- 預編譯正則表達式模式（已部分實現於 `src/index.js:183`）
- 大檔案分塊處理（參考 `tests/performance-analysis.js:371`）

---

## 📝 開發檢查清單

新增功能時請確認以下項目：

- [ ] REGEX 模式正確匹配目標語法
- [ ] 處理巢狀結構（如 @if 內有 @foreach）
- [ ] 錯誤處理和降級策略
- [ ] 編寫至少 3-5 個測試案例
- [ ] Playground 中有實際示範
- [ ] 文檔更新完整
- [ ] 更新 BLADE_FEATURES_TODO.md 狀態

---

## 📚 相關文檔

- [BLADE_FEATURES_TODO.md](./BLADE_FEATURES_TODO.md) - Blade 功能實現狀態詳細記錄
- [AGENTS.md](./AGENTS.md) - 開發指南與注意事項
